{% extends "base.html" %}
{% load static %}

{% block title %}{{ annuncio.prodotto.nome }}{% endblock %}

{% block middle %}
<div class="container mt-5 mb-5">
    <div class="row">
        <!-- Colonna Sinistra: Testo -->
        <div class="col-md-6">
            <h2>{{ annuncio.prodotto.nome }}</h2>
            <p class="text-muted">
                Pubblicato il {{ annuncio.data_pubblicazione|date:"d/m/Y H:i" }} da {{ annuncio.creazioni.first.utente.username }}
            </p>

            {% if annuncio.prodotto.descrizione_breve %}
                <p class="lead">{{ annuncio.prodotto.descrizione_breve }}</p>
            {% endif %}
            <div class="text-warning me-3">
                <i class="bi bi-star-fill"></i>
                <i class="bi bi-star-fill"></i>
                <i class="bi bi-star-fill"></i>
                <i class="bi bi-star-fill"></i>
                <i class="bi bi-star-half"></i>
            </div>
            <p class="text-muted mb-4">Rating medio: 4,4 stelle</p>
            {% if annuncio.prodotto.descrizione %}
                <p>{{ annuncio.prodotto.descrizione }}</p>
            {% endif %}

            <h4 class="text-primary mt-4">â‚¬ {{ annuncio.prodotto.prezzo }}</h4>

            <!-- Azioni -->
            <div class="mt-4">
                <button class="btn btn-success mr-2">Aggiungi al carrello</button>
                <button class="btn btn-primary">Acquista ora</button>
            </div>
        </div>

        <!-- Colonna Destra: Carosello -->
        <div class="col-md-6">
            {% if annuncio.prodotto.immagini.all %}
                <div id="caroselloProdotto" class="carousel slide" data-ride="carousel" data-interval="false">
                    <div class="carousel-inner">
                        {% for immagine in annuncio.prodotto.immagini.all %}
                            <div class="carousel-item {% if forloop.first %}active{% endif %}">
                                <img
                                    data-index="{{ forloop.counter0 }}"
                                    data-prodotto-id="{{ annuncio.prodotto.id }}"
                                    class="d-block w-100 rounded shadow immagine-carosello"
                                    src="{% static 'img/default_loading.png' %}"
                                    alt="Immagine prodotto"
                                >
                            </div>
                        {% endfor %}

                    </div>

                    <!-- Pulsanti di navigazione personalizzati -->
                    {% if annuncio.prodotto.immagini.count > 1 %}
                        <a class="carousel-control-prev" href="#caroselloProdotto" role="button" data-slide="prev">
                            <span class="carousel-control-prev-icon bg-dark rounded-circle p-3" aria-hidden="true"></span>
                            <span class="sr-only">Precedente</span>
                        </a>
                        <a class="carousel-control-next" href="#caroselloProdotto" role="button" data-slide="next">
                            <span class="carousel-control-next-icon bg-dark rounded-circle p-3" aria-hidden="true"></span>
                            <span class="sr-only">Successivo</span>
                        </a>
                    {% endif %}

                </div>
            {% else %}
                <img src="{% static 'img/default_product.png' %}" class="img-fluid rounded shadow" alt="Immagine prodotto">
            {% endif %}
        </div>
    </div>

    <!-- Commenti -->
    <div class="row mt-5">
        <div class="col-12">
            <h4 class="mb-4">ðŸ’¬ Commenti degli utenti</h4>

            <!-- Commento 1 -->
            <div class="card mb-3 shadow-sm">
                <div class="card-body d-flex">
                    <div class="text-center me-3" style="min-width: 80px;">
                        <img src="{% static 'img/default_user.png' %}" class="rounded-circle" width="50" height="50" alt="Avatar">
                    </div>
                    <div class="text-start w-100 text-left">
                        <div class="d-flex align-items-center mb-1 flex-wrap">
                            <h6 class="mb-0 font-weight-bold mr-3">Mario Rossi</h6>
                            <div class="text-warning me-3 mr-3">
                                <i class="bi bi-star-fill"></i>
                                <i class="bi bi-star-fill"></i>
                                <i class="bi bi-star-fill"></i>
                                <i class="bi bi-star-fill"></i>
                                <i class="bi bi-star"></i>
                            </div>
                            <small class="text-muted ">24/05/2025</small>
                            {# oppure se hai un campo tipo commento.data_creazione #}
                            {# <small class="text-muted">{{ commento.data_creazione|date:"d/m/Y" }}</small> #}
                        </div>
                        <p class="mb-0">Ottimo prodotto, spedizione veloce!</p>
                    </div>
                </div>
            </div>

            <!-- Commento 2 -->
            <div class="card mb-3 shadow-sm">
                <div class="card-body d-flex">
                    <div class="text-center me-3" style="min-width: 80px;">
                        <img src="{% static 'img/default_user.png' %}" class="rounded-circle" width="50" height="50" alt="Avatar">
                    </div>
                    <div class="text-start w-100 text-left">
                        <div class="d-flex align-items-center mb-1 flex-wrap">
                            <h6 class="mb-0 font-weight-bold mr-3">Mario Rossi</h6>
                            <div class="text-warning me-3 mr-3">
                                <i class="bi bi-star-fill"></i>
                                <i class="bi bi-star-fill"></i>
                                <i class="bi bi-star-fill"></i>
                                <i class="bi bi-star-fill"></i>
                                <i class="bi bi-star"></i>
                            </div>
                            <small class="text-muted ">24/05/2025</small>
                            {# oppure se hai un campo tipo commento.data_creazione #}
                            {# <small class="text-muted">{{ commento.data_creazione|date:"d/m/Y" }}</small> #}
                        </div>
                        <p class="mb-0">Ottimo prodotto, spedizione veloce!</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script src="{% static 'js/imgs_loader.js' %}"></script>
{% endblock %}
